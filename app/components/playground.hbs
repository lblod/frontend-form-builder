<div class="playground__edit">
  <div class="playground__edit__header">
    <AuHeading @level="2" @skin="4" class="au-u-margin-bottom-small">
      Stap 2: Vul placeholders in
    </AuHeading>

    <p class="au-u-margin-bottom-small">Voeg labels (name) en helpteksten (description)toe, en klik op “genereer formulier” om het te bekijken.</p>
  </div>
  <AuTabs as |Tab|>
    <Tab style="margin-bottom: 10px">
      <AuButton onClick={{fn (mut this.currentView) "CODE"}}>Code view</AuButton>
    </Tab>
    <Tab>
      <AuButton onClick={{fn (mut this.currentView) "TREE"}}>Tree view</AuButton>
    </Tab>
  </AuTabs>

  {{#if (eq this.currentView "CODE")}}
    <div {{editor @template}} style="overflow: auto; width:800px"></div>  
  {{else if (eq this.currentView "TREE")}}
    <Tree 
      style="overflow: auto; width:800px;"
      @form={{this.form}}
      @graphs={{this.graphs}}
      @sourceNode={{this.node}}
      @formStore={{@store}}
    />
  {{/if}}
  

  <div class="playground__edit__footer">
    <AuButtonGroup>
      <AuButton {{on 'click' this.updateForm}}>Bewaar</AuButton>
      <AuButton {{on 'click' this.saveLocally}} @skin="secondary" @icon="download" @iconAlignment="left">Exporteer code</AuButton>
      <AuButton {{on "click" (fn (mut this.popup) true)}} @skin="tertiary" @icon="pencil" @iconAlignment="left">Bewerk naam en beschrijving</AuButton>
      <AuButton {{on "click" this.deleteForm }} @skin="tertiary" @icon="bin" @iconAlignment="left" @alert={{true}}>Verwijder</AuButton>
    </AuButtonGroup>
  </div>
</div>
<div class="playground__show">
  <div>
    <AuHeading @level="2" @skin="4" class="au-u-margin-bottom-small">
      Stap 3: Exporteer template
    </AuHeading>
    <p class="au-u-margin-top">Eens je tevreden bent van het formulier kan de template geëxporteerd worden voor development.</p>
    <AuHr />
  </div>
  <div class="au-u-margin-top-small">
    {{#if @refresh.isRunning}}
      <AuLoader />
    {{else}}
        <RdfForm
                @groupClass="au-u-margin-left-small au-u-margin-top"
                @form={{this.form}}
                @graphs={{this.graphs}}
                @sourceNode={{this.node}}
                @formStore={{@store}}
                @show={{false}}
                @forceShowErrors={{false}}
                class="au-o-grid__item" />
    {{/if}}
  </div>
</div>


<AuModal
  @title="Bewerk naam en beschrijving"
  @modalOpen={{this.popup}}
  @closeModal={{fn (mut this.popup) false}} as |Modal| >
  <Modal.Body>
    <div class="au-o-grid au-o-grid--small">
      <div class="au-o-grid__item au-1-1">
        <AuLabel for="input-filelabel">
          Naam
        </AuLabel>
        <AuInput id="input-filelabel" @value={{this.formLabel}}/>
      </div>
      <div class="au-o-grid__item au-1-1">
        <AuLabel for="input-filecomment">Beschrijving</AuLabel>
        <AuTextarea id="input-filecomment" rows="10" @width="block" @value={{this.formComment}}/>
      </div>
    </div>
  </Modal.Body>
  <Modal.Footer>
    <AuButton {{on 'click' this.updateForm}}>Bijwerken</AuButton>
  </Modal.Footer>
</AuModal>

{{#if this.saved}}
  <div class="alert-container">
    <AuAlert @icon="check" @title="Formulier werd bijgewerkt" @skin="success" {{on 'click' (fn (mut this.saved) false)}}>
    </AuAlert>
  </div>
{{/if}}

{{#if this.error}}
  <div class="alert-container">
    <AuAlert @icon="cross" @title="Er is een fout opgetreden" @skin="error" {{on 'click' (fn (mut this.saved) false)}} {{on 'click' (fn (mut this.error) false)}}>
    </AuAlert>
  </div>
{{/if}}