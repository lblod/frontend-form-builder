<nav>
  <div class="au-c-app-chrome">
    <AuToolbar @size="small" class="au-u-padding-bottom-none" as |Group|>
      <Group>
        <AuLink @route="index" @skin="secondary" @icon="arrow-left">
          {{t "navigation.backToOverview"}}
        </AuLink>
        <span class="au-c-app-chrome__entity">{{@model.label}}</span>
      </Group>
      <Group>
        <ul class="au-c-list-horizontal au-u-padding-right-tiny">
          <li class="au-c-list-horizontal__item">
            <span class="au-c-app-chrome__status">
              {{t "toolbar.savedOn"}}
              {{or @model.modified @model.created}}
            </span>
          </li>
        </ul>
      </Group>
    </AuToolbar>
    <AuToolbar @size="small" class="au-u-padding-top-none" as |Group|>
      <Group>
        <div>
          {{#if @formChanged}}
            <AuPill @skin="warning" @icon="alert-triangle">
              {{t "toolbar.unSavedChanges"}}
            </AuPill>
          {{else}}
            <AuPill @skin="success" @icon="circle-check">
              {{t "toolbar.formUpToDate"}}
            </AuPill>
          {{/if}}
        </div>
        <div class="titleEdit">
          {{#if this.isEditingName}}
            <AuInput
              id="input-formName"
              value={{this.formLabel}}
              {{on "blur" this.handleFormNameChange}}
            />
            <AuButton
              @skin={{"primary"}}
              @icon={{"check"}}
              @hideText={{true}}
              {{on "click" this.updateFormName}}
            />
            <AuButton
              @skin={{"secondary"}}
              @icon={{"cross"}}
              @hideText={{true}}
              {{on "click" this.closeEditNameModal}}
            />
          {{else}}
            <h1 class="au-c-app-chrome__title">
              {{@model.label}}
            </h1>
            <AuButton
              @skin={{"link-secondary"}}
              @icon={{"pencil"}}
              @hideText={{true}}
              {{on "click" (fn (mut this.isEditingName) true)}}
            />
          {{/if}}

        </div>
      </Group>
      <Group class="au-c-toolbar__group--actions">
        <AuLink @route="codelijsten">{{t "toolbar.codelists"}}</AuLink>
        <div class="saveSplitButton">
          <AuButton
            id="saveSplitButton_save"
            @disabled={{not @formChanged}}
            {{on "click" this.updateForm}}
          >{{t "crud.save"}}</AuButton>
          <AuDropdown
            id="saveSplitButton_dropdown"
            @title=""
            @hideText={{true}}
            @alignment="left"
            role="menu"
            @skin="primary"
          >
            <AuButton
              @skin="link"
              @icon="export"
              role="menuitem"
              {{on "click" this.saveLocally}}
            >
              {{t "toolbar.exportCode"}}
            </AuButton>
            <AuButton
              @skin="link"
              @icon="bin"
              role="menuitem"
              @alert={{true}}
              {{on "click" (fn (mut this.showDeleteModal) true)}}
            >
              {{t "crud.delete"}}
            </AuButton>
          </AuDropdown>
        </div>
      </Group>
    </AuToolbar>
  </div>
</nav>

{{#if this.showDeleteModal}}
  <ConfirmDeletionModal
    @onDelete={{this.deleteForm}}
    @onClose={{fn (mut this.showDeleteModal) false}}
  />
{{/if}}
