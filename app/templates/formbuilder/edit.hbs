{{page-title "Formbuilder"}}
<div class="au-c-toolbar  au-c-toolbar--bottom  au-c-toolbar--large ">
  <div class="au-c-toolbar__group">
    <AuHeading @level="1" @skin="2">
      Maak en bewerk semantisch formulier
    </AuHeading>
  </div>


  <div class="au-c-toolbar__group">
    <AuButtonGroup>
      <AuLink @route="index" @skin="button-secondary" @icon="arrow-left">
        Terug naar overzicht formulieren
      </AuLink>
    </AuButtonGroup>
  </div>
</div>

<main id="main" class="au-c-main-container">
  <div class="au-c-main-container__content">
    <div class="playground">
      <div class="playground__edit">
        <AuTabs as |Tab|>
          <Tab style="margin-bottom: 10px">
            <AuButton onClick={{fn (mut this.activeTab) "CODE"}}>Code view</AuButton>
          </Tab>
          <Tab style="margin-bottom: 10px">
            <AuButton onClick={{fn (mut this.activeTab) "BUILDER"}}>Form builder</AuButton>
          </Tab>
        </AuTabs>

        <div style="overflow-y: auto;">
          {{#if (eq this.activeTab "CODE")}}
            <div {{editor this.code this.refresh}} style="overflow: auto; height: 100%; width:100%"></div>  
          {{else if (eq this.activeTab "BUILDER")}}
            <div>
              {{#if this.builderStore}}
                <RdfForm
                  @groupClass="au-o-grid__item"
                  @form={{this.builderForm}}
                  @graphs={{this.graphs}}
                  @formStore={{this.builderStore}}
                  @forceShowErrors={{true}}
                  @useNewListingLayout={{true}}
                  @sourceNode={{this.previewForm}}
                />
              {{/if}}
            </div>
            <AuButton
              {{on "click" this.serializeSourceToTtl}}>
              Serialize source to TTL
            </AuButton>
          {{/if}}
        </div>

        <Toolbar 
          @model={{this.model}}
          @code={{this.code}}
        />
      </div>
        {{#if this.refresh.isRunning}}
          <AuLoader />
        {{else}}
          {{#if this.previewStore}}

            <div class="playground__show">
              <div class="au-u-margin-top-small">
                <RdfForm
                  @groupClass="au-u-margin-left-small au-u-margin-top"
                  @form={{this.previewForm}}
                  @graphs={{this.graphs}}
                  @sourceNode={{this.sourceNode}}
                  @formStore={{this.previewStore}}
                  @forceShowErrors={{true}}
                  @useNewListingLayout={{true}}
                />
              </div>
            </div>
          {{/if}}
        {{/if}}
    </div>
  </div>
</main>


